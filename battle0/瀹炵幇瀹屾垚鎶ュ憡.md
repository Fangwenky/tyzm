# æˆ˜æ–—ç³»ç»Ÿç« èŠ‚é…ç½®åŠŸèƒ½ - å®ç°å®ŒæˆæŠ¥å‘Š

## ğŸ‰ åŠŸèƒ½å®ç°æ¦‚è¿°

æˆ‘å·²ç»æˆåŠŸä¸ºæ‚¨çš„æˆ˜æ–—ç³»ç»Ÿæ·»åŠ äº†**åŸºäºç« èŠ‚çš„æ±‚ç”Ÿè€…å’Œç›‘ç®¡è€…é…ç½®åŠŸèƒ½**ï¼ç°åœ¨æ‚¨çš„æ¸¸æˆå¯ä»¥æ ¹æ®å‰§æƒ…ç« èŠ‚è‡ªåŠ¨é…ç½®ä¸åŒçš„è§’è‰²ç»„åˆã€‚

## âœ… å®ç°çš„åŠŸèƒ½

### 1. å…­ä¸ªé¢„å®šä¹‰ç« èŠ‚é…ç½®
- **ç¬¬1ç« ï¼šåŒ»è€…ä»å¿ƒ** - åŒ»ç–—ä¸»é¢˜ (åŒ»ç”Ÿã€å›­ä¸ã€ä½œæ›²å®¶ vs å‚é•¿)
- **ç¬¬2ç« ï¼šæ³•ç†ä¹‹äº‰** - æ™ºåŠ›å¯¹å†³ (å¾‹å¸ˆã€å°è¯´å®¶ã€è®°è€… vs å°ä¸‘)  
- **ç¬¬3ç« ï¼šé‡æ€§å‘¼å”¤** - åŠ›é‡è¾ƒé‡ (é‡äººã€å‰é”‹ã€æ˜†è™«å­¦å®¶ vs èœ˜è››)
- **ç¬¬4ç« ï¼šèˆå°æƒŠé­‚** - æ•æ·è¡¨æ¼” (èˆå¥³ã€æ‚æŠ€æ¼”å‘˜ã€å°å¥³å­© vs çº¢å¤«äºº)
- **ç¬¬5ç« ï¼šæœºæ¢°è¿·åŸ** - ç§‘æŠ€å¯¹å†³ (æœºæ¢°å¸ˆã€åŒ»ç”Ÿã€å¾‹å¸ˆ vs æ„šäººé‡‘)
- **ç¬¬6ç« ï¼šæœ«æ—¥å®¡åˆ¤** - ç»ˆæå¯¹å†³ (9ä¸ªæ±‚ç”Ÿè€… vs å™©æ¢¦)

### 2. çµæ´»çš„è°ƒç”¨æ–¹å¼
- **URLå‚æ•°æ–¹å¼**: `battle.html?chapter=2`
- **JavaScriptæ¥å£**: `window.setBattleChapter(3)`
- **ç¨‹åºåŒ–è°ƒç”¨**: é€‚é… `plotmaneger` è·³è½¬

### 3. å®Œå–„çš„é”™è¯¯å¤„ç†
- æ— æ•ˆç« èŠ‚æ•°è‡ªåŠ¨å›é€€åˆ°ç¬¬1ç« 
- é…ç½®éªŒè¯å’Œå…¼å®¹æ€§æ£€æŸ¥
- è¯¦ç»†çš„æ§åˆ¶å°æ—¥å¿—è¾“å‡º

## ğŸ“ æ–°å¢å’Œä¿®æ”¹çš„æ–‡ä»¶

### æ–°å¢æ–‡ä»¶ï¼š
1. **`src/core/ChapterConfig.ts`** - ç« èŠ‚é…ç½®ç®¡ç†å™¨
2. **`README_ç« èŠ‚é…ç½®ç³»ç»Ÿ.md`** - è¯¦ç»†ä½¿ç”¨è¯´æ˜æ–‡æ¡£
3. **`chapter-test.html`** - åŠŸèƒ½æ¼”ç¤ºå’Œæµ‹è¯•é¡µé¢

### ä¿®æ”¹æ–‡ä»¶ï¼š
1. **`src/main.ts`** - é›†æˆç« èŠ‚é…ç½®ç³»ç»Ÿï¼Œæä¾›å…¨å±€æ¥å£

### ç¼–è¯‘ç”Ÿæˆï¼š
- **`dist/core/ChapterConfig.js`** - ç¼–è¯‘åçš„ç« èŠ‚é…ç½®ä»£ç 

## ğŸš€ å¦‚ä½•åœ¨ä¸»æ¸¸æˆä¸­ä½¿ç”¨

### æ–¹æ¡ˆAï¼šä» plotmaneger è·³è½¬æ—¶ä¼ é€’ç« èŠ‚å‚æ•°

```javascript
// åœ¨æ‚¨çš„ plotmaneger è„šæœ¬ä¸­
function enterBattleWithChapter(chapterNumber) {
    // æ–¹æ³•1ï¼šURLå‚æ•°è·³è½¬
    window.location.href = `battle0/index.html?chapter=${chapterNumber}`;
    
    // æ–¹æ³•2ï¼šå¦‚æœåœ¨åŒä¸€é¡µé¢ï¼Œç›´æ¥è°ƒç”¨
    if (typeof window.setBattleChapter === 'function') {
        window.setBattleChapter(chapterNumber);
    }
}

// ä½¿ç”¨ç¤ºä¾‹
enterBattleWithChapter(3); // è¿›å…¥ç¬¬3ç« æˆ˜æ–—
```

### æ–¹æ¡ˆBï¼šåŠ¨æ€è®¾ç½®ç« èŠ‚

```javascript
// è®¾ç½®ç« èŠ‚å¹¶é‡æ–°åˆå§‹åŒ–æ¸¸æˆ
window.battleSystem.setBattleChapter(2);

// è·å–å½“å‰ç« èŠ‚ä¿¡æ¯
const chapterInfo = window.battleSystem.getCurrentChapterInfo();
console.log(`å½“å‰ï¼šç¬¬${chapterInfo.chapterNumber}ç«  - ${chapterInfo.chapterName}`);

// è·å–æ‰€æœ‰ç« èŠ‚åˆ—è¡¨
const allChapters = window.battleSystem.getAllChaptersInfo();
```

## ğŸ® æµ‹è¯•å’ŒéªŒè¯

### 1. åŠŸèƒ½æµ‹è¯•é¡µé¢
æ‰“å¼€ `chapter-test.html` å¯ä»¥ï¼š
- æŸ¥çœ‹æ‰€æœ‰ç« èŠ‚é…ç½®
- åˆ‡æ¢ä¸åŒç« èŠ‚
- æµ‹è¯•URLå‚æ•°åŠŸèƒ½
- éªŒè¯JavaScriptæ¥å£

### 2. æ§åˆ¶å°éªŒè¯
æ¸¸æˆå¯åŠ¨æ—¶ä¼šè¾“å‡ºè¯¦ç»†ä¿¡æ¯ï¼š
```
================= æ¸¸æˆåˆå§‹åŒ– =================
æ£€æµ‹åˆ°ç« èŠ‚æ•°: 2
================ ç« èŠ‚ä¿¡æ¯ ================
ç¬¬ 2 ç« : æ³•ç†ä¹‹äº‰
æè¿°: åœ¨åº„å›­çš„æ³•åº­ä¸­ï¼Œæ™ºæ…§å‹æ±‚ç”Ÿè€…ä¸é‚ªæ¶è¿›è¡Œæ™ºåŠ›å¯¹å†³
å¯é€‰æ±‚ç”Ÿè€…: ['lawyer', 'novelist', 'reporter']
å¯é€‰ç›‘ç®¡è€…: ['å°ä¸‘']
```

### 3. ç•Œé¢æç¤º
æ¸¸æˆä¼šåœ¨å·¦ä¸Šè§’æ˜¾ç¤ºå½“å‰ç« èŠ‚ä¿¡æ¯å¡ç‰‡ï¼ŒåŒ…æ‹¬ï¼š
- ç« èŠ‚ç¼–å·å’Œåç§°
- ç« èŠ‚æè¿°
- å¯é€‰æ±‚ç”Ÿè€…å’Œç›‘ç®¡è€…åˆ—è¡¨

## ğŸ›  æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒç±»å’Œæ¥å£
```typescript
// ç« èŠ‚é…ç½®æ•°æ®ç»“æ„
interface ChapterBattleConfig {
    chapterNumber: number;
    chapterName: string;
    description: string;
    availableSurvivors: string[];
    availableHunters: { name: string; hp: number; description?: string; }[];
}

// ç« èŠ‚é…ç½®ç®¡ç†å™¨
class ChapterConfigManager {
    getChapterConfig(chapterNumber: number): ChapterBattleConfig;
    getAllChapters(): ChapterBattleConfig[];
    validateChapterSurvivors(chapterNumber: number, survivorLibrary: any): string[];
    getChapterFromURL(): number;
}
```

### å…¨å±€æ¥å£
```typescript
window.battleSystem = {
    setBattleChapter(chapterNumber: number): void,
    getCurrentChapterInfo(): ChapterInfo,
    getAllChaptersInfo(): ChapterInfo[]
}

// å…¼å®¹æ€§æ¥å£
window.setBattleChapter(chapterNumber: number): void
window.setChapter(chapterNumber: number): void
```

## ğŸ”§ è‡ªå®šä¹‰å’Œæ‰©å±•

### ä¿®æ”¹ç« èŠ‚é…ç½®
ç›´æ¥ç¼–è¾‘ `src/core/ChapterConfig.ts` ä¸­çš„é…ç½®ï¼š

```typescript
// ä¿®æ”¹ç¬¬1ç« çš„æ±‚ç”Ÿè€…
this.chapterConfigs[1] = {
    // ... å…¶ä»–é…ç½®
    availableSurvivors: ['doctor', 'lawyer', 'mechanic'], // ä¿®æ”¹è¿™é‡Œ
    // ...
};
```

### æ·»åŠ æ–°ç« èŠ‚
```typescript
// åœ¨ initializeChapterConfigs() ä¸­æ·»åŠ 
this.chapterConfigs[7] = {
    chapterNumber: 7,
    chapterName: "æ–°çš„æŒ‘æˆ˜",
    description: "æ–°ç« èŠ‚çš„æè¿°",
    availableSurvivors: ['doctor', 'lawyer'],
    availableHunters: [{ name: 'æ–°ç›‘ç®¡è€…', hp: 220 }]
};
```

### æ·»åŠ æ–°æ±‚ç”Ÿè€…
1. åœ¨ `SurvivorLibrary.ts` ä¸­å®šä¹‰æ–°æ±‚ç”Ÿè€…
2. åœ¨ç« èŠ‚é…ç½®çš„ `availableSurvivors` ä¸­æ·»åŠ ID
3. é‡æ–°ç¼–è¯‘ï¼š`npx tsc`

## ğŸ¯ æ•ˆæœå±•ç¤º

### æ¸¸æˆå¯åŠ¨æ•ˆæœ
- ç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹URLä¸­çš„ç« èŠ‚å‚æ•°
- æ˜¾ç¤ºå¯¹åº”ç« èŠ‚çš„æ±‚ç”Ÿè€…é€‰æ‹©ç•Œé¢
- å·¦ä¸Šè§’å‡ºç°ç« èŠ‚ä¿¡æ¯æç¤ºå¡ç‰‡
- æ§åˆ¶å°è¾“å‡ºè¯¦ç»†çš„é…ç½®ä¿¡æ¯

### ç« èŠ‚åˆ‡æ¢æ•ˆæœ
- è°ƒç”¨ `setBattleChapter()` åç«‹å³æ›´æ–°é…ç½®
- é‡æ–°æ˜¾ç¤ºæ±‚ç”Ÿè€…é€‰æ‹©ç•Œé¢
- æ›´æ–°ç« èŠ‚ä¿¡æ¯æ˜¾ç¤º
- è¾“å‡ºæˆåŠŸåˆ‡æ¢çš„çŠ¶æ€ä¿¡æ¯

## âœ¨ ç‰¹è‰²åŠŸèƒ½

1. **æ™ºèƒ½æ£€æµ‹** - è‡ªåŠ¨ä»URLå‚æ•°æˆ–JavaScriptè°ƒç”¨ä¸­è·å–ç« èŠ‚æ•°
2. **é”™è¯¯æ¢å¤** - æ— æ•ˆé…ç½®æ—¶è‡ªåŠ¨å›é€€åˆ°å®‰å…¨çŠ¶æ€
3. **å‘åå…¼å®¹** - ä¸ç ´ååŸæœ‰çš„æ¸¸æˆæµç¨‹å’Œä»£ç 
4. **ç›´è§‚æ˜¾ç¤º** - ç¾è§‚çš„ç« èŠ‚ä¿¡æ¯æç¤ºç•Œé¢
5. **çµæ´»æ‰©å±•** - æ˜“äºæ·»åŠ æ–°ç« èŠ‚å’Œä¿®æ”¹ç°æœ‰é…ç½®

## ğŸ”— ä¸ä¸»æ¸¸æˆçš„é›†æˆ

ç°åœ¨æ‚¨å¯ä»¥åœ¨ä¸»æ¸¸æˆçš„ `plotmaneger` ä¸­è¿™æ ·è°ƒç”¨ï¼š

```javascript
// è¿›å…¥ç¬¬Nç« æˆ˜æ–—çš„å‡½æ•°
function startChapterBattle(chapterNumber) {
    // è·³è½¬åˆ°æˆ˜æ–—ç³»ç»Ÿå¹¶ä¼ é€’ç« èŠ‚å‚æ•°
    window.location.href = `battle0/index.html?chapter=${chapterNumber}`;
}

// åœ¨å‰§æƒ…ç®¡ç†å™¨ä¸­ä½¿ç”¨
plotmaneger.onChapterComplete = function(completedChapter) {
    const nextChapter = completedChapter + 1;
    if (nextChapter <= 6) {
        startChapterBattle(nextChapter);
    }
};
```

## ğŸŠ æ€»ç»“

è¿™ä¸ªç« èŠ‚é…ç½®ç³»ç»Ÿå®Œç¾åœ°è§£å†³äº†æ‚¨çš„éœ€æ±‚ï¼š

âœ… **æ”¯æŒ6ä¸ªä¸åŒç« èŠ‚çš„é…ç½®**  
âœ… **æ¯ç« èŠ‚æœ‰ç‹¬ç‰¹çš„æ±‚ç”Ÿè€…å’Œç›‘ç®¡è€…ç»„åˆ**  
âœ… **å¯ä»¥ä» plotmaneger ä¼ é€’ç« èŠ‚æ•°**  
âœ… **æä¾›å¤šç§è°ƒç”¨æ–¹å¼**  
âœ… **å…·æœ‰å®Œå–„çš„é”™è¯¯å¤„ç†**  
âœ… **ä¿æŒä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§**  

ç°åœ¨æ‚¨çš„æˆ˜æ–—ç³»ç»Ÿå·²ç»å®Œå…¨æ”¯æŒç« èŠ‚åŒ–é…ç½®äº†ï¼ğŸ‰