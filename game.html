<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ç‰ˆæœ¬0.0</title>
  <link rel="stylesheet" type="text/css" href="./assets/style/style.css">
  <link rel="stylesheet" type="text/css" href="./assets/style/main.css">
  <link rel="stylesheet" href="./assets/style/achievement.css">
  <link rel="stylesheet" href="./assets/style/bag.css">

<style>
  /* å³ä¾§æŠ½å±‰é¢æ¿ */
  .guide-side {
    position: fixed; top: 0; right: 0; height: 100vh; width: 320px;
    background: rgba(20,22,28,0.94); color: #fff; border-left: 1px solid #2a2f3a;
    box-shadow: -8px 0 24px rgba(0,0,0,0.25); z-index: 10010;
    transform: translateX(100%); transition: transform .25s ease;
    display: flex; flex-direction: column;
  }
  .guide-side:not(.hidden){ transform: translateX(0); }
  .guide-head { display:flex; align-items:center; justify-content:space-between;
    padding:12px 14px; border-bottom:1px solid #2a2f3a; font-weight:600; }
  .guide-list{ padding:10px 8px; overflow:auto; flex:1; }
  .guide-item{ display:flex; gap:10px; align-items:flex-start; padding:10px 8px; border-bottom:1px dashed #333; }
  .guide-item .g-title{ font-weight:600; }
  .guide-item .g-desc{ opacity:.8; font-size:12px; margin-top:2px; }
  .guide-item.done{ opacity:.55; text-decoration: line-through; }
  .guide-item .g-act { margin-left:auto; }
  #btn-open-guide.hud-btn{ left:auto; right:16px; top:56px; position:fixed; }

  /* âœ… æ–°å¢ï¼šè®© popup å’Œ overlay é»˜è®¤éšè— */
  #overlay, #popup {
    display: none;
  }
</style>

</head>

<body>
   <audio id="bgm" src="./assets/audios/game.mp3" autoplay loop></audio> 
  <!-- ç‹¬ç«‹çš„èƒŒåŒ…æ‚¬æµ®æŒ‰é’®ï¼ˆåœ¨å·¦ä¸Šè§’é½¿è½®æŒ‰é’®æ­£ä¸‹æ–¹ï¼‰ -->

  <canvas id="gameCanvas" tabindex="0" aria-label="æ¸¸æˆç”»å¸ƒ"></canvas>


<!-- åŠé€æ˜é®ç½©å±‚ -->
<div id="overlay"></div>

<!-- æ‚¬æµ®çª— -->
<div id="popup">
  <button id="closeBtn">Ã—</button>
  <iframe src="./minigame/minigame/minigame.html"></iframe>
</div>


<div class="hud-panel">
    <button id="btn-gear" class="hud-btn" title="æ‰“å¼€èœå•" aria-label="æ‰“å¼€èœå•"style="font-size: 36px;">âš™</button>
    <button id="btn-open-bag" class="hud-btn" aria-label="æ‰“å¼€èƒŒåŒ…" title="èƒŒåŒ…" style="font-size: 36px;">ğŸ§³</button>
    <button id="btn-open-plot" class="hud-btn hidden" aria-label="æ‰“å¼€å‰§æƒ…ç³»ç»Ÿ" title="å‰§æƒ…" style="font-size: 36px;">ğŸ“–</button>
    <button id="btn-open-money" class="hud-btn" aria-label="å……å€¼" title="æ”¯æŒæˆ‘ä»¬" style="font-size: 36px;">ğŸ’°</button>
</div>
</div>


<div id="image-overlay" class="overlay hidden">
  <div class="image-card">
    <img src="assets/imgs/money.jpg" style="max-width:50%; border-radius:8px;" alt="å……å€¼æ¸¸æˆ"/>
    <button id="btn-close-image" class="btn ghost">å…³é—­</button>
  </div>
</div>

  <!-- èœå•å¼¹çª— -->
  <div id="ingame-menu" class="overlay hidden" role="dialog" aria-modal="true" aria-labelledby="ingame-menu-title">
    <div class="menu-card glass">
      <h1 id="ingame-menu-title">æ¸¸æˆèœå•</h1>
      <p class="desc">ç‚¹å‡»â€œä¿å­˜æ¸¸æˆâ€å³å¯æŠŠå½“å‰æ¸¸æˆè¿›åº¦å†™å…¥å­˜æ¡£ã€‚å½“ç„¶ï¼Œç”±äºæˆ‘ä»¬æ”¯æŒè‡ªåŠ¨å­˜æ¡£ï¼Œæ‰€ä»¥ä¸å­˜æ¡£ä¹Ÿæ²¡å…³ç³»å–µï¼</p>
      <div class="menu-actions">
        <button id="btn-save-now" class="btn red">ä¿å­˜æ¸¸æˆ</button>
        <button id="btn-back-main" class="btn ghost">è¿”å›ä¸»ç•Œé¢</button>
        <button id="btn-close-menu" class="btn ghost">å…³é—­</button>
      </div>
    </div>
  </div>
  <!-- èƒŒåŒ…é¢æ¿ï¼ˆé»˜è®¤éšè—ï¼‰ -->
<div id="bag-overlay" class="overlay hidden" role="dialog" aria-modal="true" aria-labelledby="bag-title">
  <div class="menu-card glass" style="max-width:680px;">
    <h1 id="bag-title">èƒŒåŒ…</h1>
    <p class="desc">è¿™é‡Œæ˜¾ç¤ºå½“å‰å­˜æ¡£å†…æŒæœ‰çš„ç‰©å“ã€‚</p>

    <!-- ç‰©å“åˆ—è¡¨ -->
    <div id="bag-list" class="save-list" style="margin-top:8px;"></div>

    <!-- æ“ä½œåŒºï¼ˆå¯æŒ‰éœ€æ‰©å±•ï¼Œæ¯”å¦‚ä½¿ç”¨/ä¸¢å¼ƒï¼‰ -->
    <div class="menu-actions">
      <button id="btn-close-bag" class="btn ghost">å…³é—­</button>
    </div>
  </div>
</div>



<!-- å‰§æƒ…ç³»ç»Ÿé¢æ¿ï¼ˆé»˜è®¤éšè—ï¼‰ -->
<div id="plot-overlay" class="overlay hidden" role="dialog" aria-modal="true" aria-labelledby="plot-title">
  <div class="menu-card glass" style="max-height:80vh;overflow-y: auto;">
    <h1 id="plot-title">å‰§æƒ…ç³»ç»Ÿ</h1>
    <p class="desc">é€‰æ‹©ç« èŠ‚æ¸¸ç©æˆ–å›æ”¾ã€‚é€šå…³ä¸€ç« åè§£é”ä¸‹ä¸€ç« ã€‚</p>

    <!-- ç« èŠ‚åˆ—è¡¨ -->
    <div id="plot-list" class="save-list" style="margin-top:8px;"></div>

    <div class="menu-actions">
      <button id="btn-close-plot" class="btn ghost">å…³é—­</button>
    </div>
  </div>
</div>
<!-- å³ä¾§çš„æ–°æ‰‹å¼•å¯¼æŒ‰é’® -->
<button id="btn-open-guide" class="hud-btn" aria-label="æ‰“å¼€æ–°æ‰‹å¼•å¯¼" title="å¼•å¯¼">â”</button>

<!-- æ–°æ‰‹å¼•å¯¼ä¾§æ ï¼ˆé»˜è®¤éšè—ï¼‰ -->
<div id="guide-panel" class="guide-side hidden" role="complementary" aria-label="æ–°æ‰‹å¼•å¯¼">
  <div class="guide-head">
    <h1>æ–°æ‰‹å¼•å¯¼</h1>
    <button id="btn-close-guide" class="btn ghost" aria-label="å…³é—­å¼•å¯¼">âœ•</button>
  </div>
  <div id="guide-list" class="guide-list"></div>
</div>



  <!-- æˆå°±å¼¹çª— -->
<div class="ach-popup hidden">
  <div class="ach-title">æˆå°±æ ‡é¢˜</div>
  <div class="ach-desc">æˆå°±æè¿°</div>
</div>

  <!-- ä½ çš„å…¶å®ƒè„šæœ¬ï¼ˆä¿æŒä¸å˜ï¼›å¦‚å®ƒä»¬ä¾èµ– canvasï¼Œè¯·ä¹ŸåŠ  deferï¼‰ -->
   <script defer src="./script/managers/AchievementManager.js"></script>
  <script defer src="./script/managers/savemanager.js"></script>
  <script defer src="./script/menu.js"></script>
  <script defer src="./script/managers/InventoryManager.js"></script>
  <script defer src="./script/managers/PlotManager.js"></script>
  <script defer src="./script/managers/GuideManager.js"></script>

  <!-- å…ˆå·¥å…·/äº¤äº’ï¼Œå†ä¸»é€»è¾‘ -->
   <script defer src="./script/game.js"></script>
  <script defer src="./script/interaction.js"></script>
  <script defer src="./script/player.js"></script>
  
</body>
</html>
